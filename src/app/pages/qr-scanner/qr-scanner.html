<ion-header  class="ion-no-border ion-padding-horizontal">
  <ion-toolbar color="light" >
    <ion-buttons slot="start" (click)="dismiss()" *ngIf="slidePage ==1">
      <ion-icon slot="icon-only" name="close" class="medium-font"> </ion-icon>
    </ion-buttons>
    <ion-buttons slot="start" (click)="back()" *ngIf="slidePage ==2">
      <ion-icon slot="icon-only"  name="arrow-back-outline" class="medium-font"> </ion-icon>
    </ion-buttons>
    <ion-title class="medium-font bold-font"> {{"qrscanner.page.title"  | translate}}  </ion-title>


 
    <ion-buttons slot="end" (click)="scanBarcode()" >
      <ion-icon slot="icon-only" name="qr-code" class="large-font"> </ion-icon>
    </ion-buttons> 
   
  </ion-toolbar>
  <ion-toolbar color="light" class="ion-no-padding">
    <ion-searchbar [(ngModel)]="searchBrand" [placeholder]="this.translate.get('qrscanner.search.placeholder')" mode="ios"></ion-searchbar>
  </ion-toolbar>

</ion-header>
<ion-content  class="box-border-top">
  <div class="walkthrough-slides" [ngSwitch]="slidePage" >
    <div class="slide-item"  *ngSwitchCase="1" >

      <ion-grid  class="ion-padding" [hidden]=" loading">
          <ion-row>
            <ion-col>
              <p class="ion-text-start ion-no-margin bold-font xlarge-font"> {{"qrscanner.selectbrand.text"  | translate}} </p>
              <p class="ion-text-start ion-no-margin regular-font medium-font">{{"qrscanner.haveproducturl.text"  | translate}} </p>
          </ion-col>
          
          </ion-row>


          <ion-row>

            <ion-col class="category_col" *ngFor="let b of brands | searchBrandFilter : searchBrand ;let i = index">

              <div  class="category_item" >
                <ion-button size="small"  color="light" shape="round" class="small-input-border bold-font box-shadow" expand="full" (click)="openIframeBrand(b.link)">
                  {{b.name}}</ion-button>
                </div>            
            </ion-col>
          </ion-row>
          <!-- <ion-row>
            <ion-col size="12">
              <ion-item lines='none' class="input-item input-border  small-font box-shadow">
      
                <ion-textarea  class="input-border" fz-elastic [placeholder]="this.translate.get('qrscanner.link.placeholder')" [(ngModel)]="productLink"></ion-textarea>
                <a class="type-toggle" (click)="clipboardPaste()">
                  <ion-icon class="show-option" name="clipboard"></ion-icon>
                </a>

              </ion-item>
              <div class="error-container">
                <div class="error-message small-font" *ngIf="productLink && !isURL(productLink)">
                  <ion-icon name="information-circle-outline"></ion-icon>
                  <span>{{"qrscanner.notalink.text"  | translate}}</span>
                </div>
              </div>
            </ion-col>
      
          </ion-row>
          <ion-row class="ion-margin-vertical">
            <ion-col size="12"  class="ion-no-padding ion-no-margin" >
              <ion-button size="small"  color="darkest" shape="round" class="small-input-border bold-font box-shadow"  expand="full" (click)="scanBarcode()" >
                <ion-icon name="qr-code"></ion-icon>
                {{"qrscanner.scanlink.text"  | translate}}</ion-button>
            </ion-col>
      
          </ion-row>
      
          <ion-row class="ion-margin-vertical">
            <ion-col size="12"  class="ion-no-padding ion-no-margin" >
              <p class="ion-text-center ion-no-margin regular-font medium-font"> OR </p>
      
            </ion-col>
            
          </ion-row>
          <ion-row class="ion-margin-vertical">
            <ion-col size="12"  class="ion-no-padding ion-no-margin" >
              <ion-button size="small"  color="darkest" shape="round" class="small-input-border bold-font box-shadow" (click)="searchExternally()" expand="full">
                <ion-icon name="globe"></ion-icon>
                {{"qrscanner.searchexternally.text"  | translate}}</ion-button>
            </ion-col>
      
          </ion-row> -->

      </ion-grid>    
        

    </div>    
    <div class="slide-item"  *ngSwitchCase="2" >
      <ion-grid class="ion-padding" [hidden]="!loading"> 
        <ion-row>
          <ion-col class="ion-margin-vertical ion-padding-vertical">
            <div class=" ion-text-center ion-padding">
              <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="margin: auto; background: #fafafa; display: block;" width="41px" height="41px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">
                <circle cx="84" cy="50" r="10" fill="#000000">
                    <animate attributeName="r" repeatCount="indefinite" dur="1.0416666666666665s" calcMode="spline" keyTimes="0;1" values="10;0" keySplines="0 0.5 0.5 1" begin="0s"></animate>
                    <animate attributeName="fill" repeatCount="indefinite" dur="4.166666666666666s" calcMode="discrete" keyTimes="0;0.25;0.5;0.75;1" values="#000000;#000000;#000000;#000000;#000000" begin="0s"></animate>
                </circle><circle cx="16" cy="50" r="10" fill="#000000">
                  <animate attributeName="r" repeatCount="indefinite" dur="4.166666666666666s" calcMode="spline" keyTimes="0;0.25;0.5;0.75;1" values="0;0;10;10;10" keySplines="0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1" begin="0s"></animate>
                  <animate attributeName="cx" repeatCount="indefinite" dur="4.166666666666666s" calcMode="spline" keyTimes="0;0.25;0.5;0.75;1" values="16;16;16;50;84" keySplines="0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1" begin="0s"></animate>
                </circle><circle cx="50" cy="50" r="10" fill="#000000">
                  <animate attributeName="r" repeatCount="indefinite" dur="4.166666666666666s" calcMode="spline" keyTimes="0;0.25;0.5;0.75;1" values="0;0;10;10;10" keySplines="0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1" begin="-1.0416666666666665s"></animate>
                  <animate attributeName="cx" repeatCount="indefinite" dur="4.166666666666666s" calcMode="spline" keyTimes="0;0.25;0.5;0.75;1" values="16;16;16;50;84" keySplines="0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1" begin="-1.0416666666666665s"></animate>
                </circle><circle cx="84" cy="50" r="10" fill="#000000">
                  <animate attributeName="r" repeatCount="indefinite" dur="4.166666666666666s" calcMode="spline" keyTimes="0;0.25;0.5;0.75;1" values="0;0;10;10;10" keySplines="0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1" begin="-2.083333333333333s"></animate>
                  <animate attributeName="cx" repeatCount="indefinite" dur="4.166666666666666s" calcMode="spline" keyTimes="0;0.25;0.5;0.75;1" values="16;16;16;50;84" keySplines="0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1" begin="-2.083333333333333s"></animate>
                </circle><circle cx="16" cy="50" r="10" fill="#000000">
                  <animate attributeName="r" repeatCount="indefinite" dur="4.166666666666666s" calcMode="spline" keyTimes="0;0.25;0.5;0.75;1" values="0;0;10;10;10" keySplines="0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1" begin="-3.1249999999999996s"></animate>
                  <animate attributeName="cx" repeatCount="indefinite" dur="4.166666666666666s" calcMode="spline" keyTimes="0;0.25;0.5;0.75;1" values="16;16;16;50;84" keySplines="0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1" begin="-3.1249999999999996s"></animate>
                </circle>
                </svg>
              <div >  

                <p class="ion-text-center  bold-font xlarge-font"> {{"qrscanner.looking.text"  | translate}} </p>
                <p class="ion-text-center  regular-font medium-font">{{"qrscanner.pleasewait.text"  | translate}} </p>
              </div>
            </div>
          </ion-col>
        </ion-row>
      </ion-grid>

      <ion-grid class="ion-padding" [hidden]="!loading2"> 
        <ion-row>
          <ion-col class="ion-margin-vertical ion-padding-vertical">
            <div class=" ion-text-center ion-padding">
              <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="margin: auto; background: #fafafa; display: block;" width="41px" height="41px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">
                <circle cx="84" cy="50" r="10" fill="#000000">
                    <animate attributeName="r" repeatCount="indefinite" dur="1.0416666666666665s" calcMode="spline" keyTimes="0;1" values="10;0" keySplines="0 0.5 0.5 1" begin="0s"></animate>
                    <animate attributeName="fill" repeatCount="indefinite" dur="4.166666666666666s" calcMode="discrete" keyTimes="0;0.25;0.5;0.75;1" values="#000000;#000000;#000000;#000000;#000000" begin="0s"></animate>
                </circle><circle cx="16" cy="50" r="10" fill="#000000">
                  <animate attributeName="r" repeatCount="indefinite" dur="4.166666666666666s" calcMode="spline" keyTimes="0;0.25;0.5;0.75;1" values="0;0;10;10;10" keySplines="0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1" begin="0s"></animate>
                  <animate attributeName="cx" repeatCount="indefinite" dur="4.166666666666666s" calcMode="spline" keyTimes="0;0.25;0.5;0.75;1" values="16;16;16;50;84" keySplines="0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1" begin="0s"></animate>
                </circle><circle cx="50" cy="50" r="10" fill="#000000">
                  <animate attributeName="r" repeatCount="indefinite" dur="4.166666666666666s" calcMode="spline" keyTimes="0;0.25;0.5;0.75;1" values="0;0;10;10;10" keySplines="0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1" begin="-1.0416666666666665s"></animate>
                  <animate attributeName="cx" repeatCount="indefinite" dur="4.166666666666666s" calcMode="spline" keyTimes="0;0.25;0.5;0.75;1" values="16;16;16;50;84" keySplines="0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1" begin="-1.0416666666666665s"></animate>
                </circle><circle cx="84" cy="50" r="10" fill="#000000">
                  <animate attributeName="r" repeatCount="indefinite" dur="4.166666666666666s" calcMode="spline" keyTimes="0;0.25;0.5;0.75;1" values="0;0;10;10;10" keySplines="0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1" begin="-2.083333333333333s"></animate>
                  <animate attributeName="cx" repeatCount="indefinite" dur="4.166666666666666s" calcMode="spline" keyTimes="0;0.25;0.5;0.75;1" values="16;16;16;50;84" keySplines="0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1" begin="-2.083333333333333s"></animate>
                </circle><circle cx="16" cy="50" r="10" fill="#000000">
                  <animate attributeName="r" repeatCount="indefinite" dur="4.166666666666666s" calcMode="spline" keyTimes="0;0.25;0.5;0.75;1" values="0;0;10;10;10" keySplines="0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1" begin="-3.1249999999999996s"></animate>
                  <animate attributeName="cx" repeatCount="indefinite" dur="4.166666666666666s" calcMode="spline" keyTimes="0;0.25;0.5;0.75;1" values="16;16;16;50;84" keySplines="0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1" begin="-3.1249999999999996s"></animate>
                </circle>
                </svg>
              <div >  

                <p class="ion-text-center  bold-font xlarge-font"> {{"qrscanner.productfound.text"  | translate}} </p>
                <p class="ion-text-center  regular-font medium-font">{{"qrscanner.productfounddescription.text"  | translate}} </p>
              </div>
            </div>
          </ion-col>
        </ion-row>
      </ion-grid>

      <ion-grid  class="ion-padding" [hidden]="loading || loading2">
          <ion-row>
            <ion-col>
              <p class="ion-text-start ion-no-margin bold-font xlarge-font"> {{"qrscanner.productdetails.text"  | translate}} </p>
              <p class="ion-text-start ion-no-margin regular-font medium-font">{{"qrscanner.productdetailsdescription.text" | translate}} </p>
          </ion-col>
          </ion-row>
          <ion-row>
            <ion-col size = "12">
              <div *ngIf="product">
                <app-product-tag [modal]="modalCtrl" [type]="'found'"  [product] = "product"  [index] ="1"></app-product-tag>
              </div>
          </ion-col>
          </ion-row>
          <ion-row *ngIf="!found">
            <ion-col size="12" class="ion-margin-top">
              <ion-item  lines='none' class="input-item input-border small-font box-shadow">
                <ion-input class="input-border" type="text"   [(ngModel)]="product['name']"></ion-input>
              </ion-item>
            </ion-col>
            <ion-col size="12" class="ion-margin-top">
              <ion-item lines='none' class="input-item input-border no-padding small-font box-shadow">
                <ion-segment color="black" [value]='gender' mode="md" (ionChange)="genderChanged($event)">
                <ion-segment-button  value="Male">
                  <ion-label>{{"auth.bodyMeasures.male" | translate}}</ion-label>
                </ion-segment-button>
                <ion-segment-button value="Female">
                  <ion-label>{{"auth.bodyMeasures.female" | translate}}</ion-label>
                </ion-segment-button>
              </ion-segment>
              </ion-item>
          </ion-col>
            <ion-col size="12" class="ion-margin-top">
              <ion-item  lines='none' class="input-item input-border small-font box-shadow">
                <ion-label><p class="small-font ion-float-left bold-font"> {{"qrscanner.categroy.text"  | translate}}</p></ion-label>
                <ion-select okText="OK" cancelText="Close" [(ngModel)]="category"  multiple="false" color="darkest">
                  <ion-select-option *ngFor="let cat of categories" [value]="cat.name">{{ getCategoryTranslation(cat.name)}}</ion-select-option>
                </ion-select>
              </ion-item>
          </ion-col>

          <ion-col size="12" class="ion-margin-top">
            <ion-button expand="full"  color="darkest" [disabled] ="!category"  class="bold-font box-shadow input-border" shape="round" type="submit"
            (click)="add();" >{{"qrscanner.add.text"  | translate}}</ion-button>  
          </ion-col>

          </ion-row>


          <ion-row *ngIf="found">
            

            <ion-col size="6" class="ion-margin-top">
              <ion-button class="bold-font box-shadow input-border" shape="round" expand="full" color="darkest" fill="outline"
              (click)="open(productId);" >{{ "product.tag.component.view" | translate}}</ion-button>  

            </ion-col>
            <ion-col size="6" class="ion-margin-top">
              <ion-button expand="full"  color="darkest"  class="bold-font box-shadow input-border" shape="round" type="submit"
              (click)="addClosetProduct(productId);" >{{"qrscanner.add.text"  | translate}}</ion-button>  

            </ion-col>
          </ion-row>

      </ion-grid>    
    </div>  

  </div>


</ion-content>

<!-- <ion-footer [hidden]="loading">
  <div class="footer box-border-top">
   <ion-grid class="ion-padding">
     <ion-row>
       <ion-col>
        <div class="button_div" [ngSwitch]="slidePage" >  

          <ion-button expand="full"  *ngSwitchCase="1" color="darkest" [disabled] ="!productLink || !isURL(productLink)"  class="bold-font box-shadow botton_btn input-border" shape="round" type="submit"
  (click)="manageLink();" >{{"qrscanner.next.text"  | translate}}</ion-button>  
      
          <ion-button expand="full"  *ngSwitchCase="2" color="darkest" [disabled] ="!category"   class="bold-font box-shadow botton_btn input-border" shape="round" type="submit"
          (click)="scrapeProduct();" >{{"qrscanner.next.text"  | translate}}</ion-button>
          
          <ion-button expand="full"  *ngSwitchCase="3" color="darkest"  class="bold-font box-shadow botton_btn input-border" shape="round" type="submit"
          (click)="dismiss();" >{{"qrscanner.close.text"  | translate}}</ion-button>   
        </div>
        <div class="legal-stuff xsmall-font">
        </div>
       </ion-col>
     </ion-row>
   </ion-grid>
  </div>
</ion-footer> -->
<div  [ngSwitch]="slidePage" >
  <div *ngSwitchCase="1"  class="fab-container">
    <!-- <ion-fab vertical="bottom" horizontal="start">
      <ion-fab-button (click)="addToCloset(productLink)" ion-fab color="black" class="take-photo" >
        <ion-icon name="qr-code"></ion-icon>
      </ion-fab-button>
    </ion-fab> -->
    <ion-fab vertical="bottom" horizontal="end">
      <ion-fab-button (click)="addProductPage()" ion-fab color="black" class="take-photo" >
        <ion-icon name="camera-outline"></ion-icon>
      </ion-fab-button>
    </ion-fab>
  </div>
</div>


<!-- <ion-footer *ngIf="selectedPhoto" style="bottom: 0px">

</ion-footer> -->